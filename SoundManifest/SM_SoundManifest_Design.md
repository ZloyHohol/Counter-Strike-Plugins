# Дизайн-документ плагина: SM_SoundManifest

## 1. Основная концепция

**SM_SoundManifest** — это единый, современный плагин для управления всеми звуковыми событиями на сервере. Он заменяет собой и `Quake Sounds`, и `Welcome Sound`, объединяя их функционал в одной гибкой и стабильной системе.

Плагин позволяет проигрывать звуки на различные игровые события (убийства, серии, хедшоты, вход игрока) и дает возможность как администратору гибко настраивать эти звуки, так и игрокам отключать их для себя.

## 2. Структура файлов

Плагин будет использовать следующую структуру файлов в папке `addons/sourcemod/`:

-   `/plugins/SM_SoundManifest.smx` — Скомпилированный плагин.
-   `/scripting/SM_SoundManifest.sp` — Исходный код плагина.
-   `/configs/SoundManifest_Sounds.ini` — **Главный файл настроек.** Здесь настраиваются все звуки и события.
-   `/translations/SM_SoundManifest.phrases.txt` — Файл с текстами для чата (поддержка языков и цветов).
-   `/cfg/sourcemod/SM_SoundManifest.cfg` — Файл, автоматически создаваемый для консольных переменных (CVAR).

## 3. Главный файл конфигурации (`SoundManifest_Sounds.ini`)

Это сердце плагина. Вся настройка звуков происходит здесь. Файл использует простой синтаксис KeyValues.

**Пример структуры:**

```ini
//
// Главный файл настройки звуков для SM_SoundManifest
//
"SoundManifest"
{
    // --- ЗВУК ПРИВЕТСТВИЯ ПРИ ВХОДЕ НА СЕРВЕР ---
    "JoinServer"
    {
        // Секция для обычных игроков
        "Default"
        {
            // Можно указать несколько звуков, будет выбран случайный
            "sound_1"       "music/welcome/welcome1.mp3"
            "sound_2"       "music/welcome/welcome2.mp3"
        }

        // Секция для админов
        "Admins"
        {
            "flag"          "b" // Флаг доступа (например, "b" - основной админ) или "bez" для групп из участников с разными флагами.
            "sound_1"       "music/admin_welcome.mp3" // Можно один звук
        }

        // Секция для VIP-игроков
        "VIPs"
        {
            "flag"          "o" // Пример: кастомный флаг "o"
            "sound_1"       "music/vip/vip_join1.mp3"
            "sound_2"       "music/vip/vip_join2.mp3"
        }
    }

    // --- ЗВУКИ НА ИГРОВЫЕ СОБЫТИЯ (по аналогии с Quake Sounds) ---

    "FirstBlood" // Первая кровь
    {
        "sound"     "quakesounds/firstblood.wav"
        "message"   "{green}Первая кровь пролита игроком {red}{1}{default}!" // {1} - имя убийцы
    }

    "Headshot" // Убийство в голову
    {
        "sound"     "quakesounds/headshot.wav"
        "message"   "{red}{1}{default} поставил хедшот игроку {blue}{2}{default}." // {1} - убийца, {2} - жертва
    }

    "DoubleKill" // Два убийства подряд
    {
        "sound"     "quakesounds/doublekill.wav"
        "message"   "{red}{1} {default}совершает двойное убийство!"
    }
    
    "Suicide" // Самоубийство
    {
        // Для этого события нет звука, только сообщение
        "message"   "{green}{1} {default}покончил с собой."
    }

    // ... и так далее для других событий: TripleKill, KnifeKill, GrenadeKill и т.д.
}
```

## 4. Консольные переменные (CVARs)

Все переменные будут созданы в `cfg/sourcemod/SM_SoundManifest.cfg`.

-   `sm_soundmanifest_enabled` (1/0, по умолчанию: 1) — Включить/выключить плагин.
-   `sm_soundmanifest_join_delay` (0.0 - 30.0, по умолчанию: 3.0) — Задержка в секундах перед проигрыванием звука приветствия.
-   `sm_soundmanifest_join_audience` (0/1, по умолчанию: 0) — Кто слышит звук приветствия: `0` = только вошедший игрок, `1` = все на сервере.
-   `sm_soundmanifest_join_interval` (0.0 - 300.0, по умолчанию: 10.0) — Минимальный интервал в секундах между проигрыванием звуков приветствия (защита от спама при массовом входе).
-   `sm_soundmanifest_default_setting` (1/0, по умолчанию: 1) — Включены ли звуки по умолчанию для новых игроков.

## 5. Команды

-   `sm_soundmanifest` (в консоль)
-   `!soundmanifest` / `/soundmanifest` (в чат)

Открывает меню персональных настроек для игрока, где он может включить или выключить проигрывание всех звуков для себя. Выбор будет сохраняться в cookie.

## 6. Поддержка русского языка и цветов

Все сообщения, выводимые в чат (например, `{green}Первая кровь...`), будут находиться в файле `translations/SM_SoundManifest.phrases.txt`. Это позволит легко редактировать текст и цвета, а также добавлять другие языки, не трогая исходный код плагина. Это стандартный и самый правильный подход в SourceMod.

---
Этот документ описывает надежный, гибкий и современный плагин, который решает все поставленные вами задачи. Жду вашего одобрения, чтобы приступить к написанию кода.
секция для озвучки и вывода информации о: 1) изгнании игроков (Kick); 2)VAC-блоркировка 3) игрок отключился/вышел (самостоятельно)